function load(){var t=$(".wrap").width();400<$(window).width()&&(t=400);var o=$(".can")[0],d=o.getContext("2d");o.width=t,o.height=t,d.translate(t/2,t/2);for(var n=[],a=function(t,o){return Math.floor(Math.random()*(o-t+1)+t)},i=0,e=0;e<9;e++){var l=a(100,500);i+=l,n.push({name:"电影"+e,color:"rgb("+a(0,255)+"},"+a(0,255)+"},"+a(0,255)+")",num:l})}n.sort(function(t,o){return o.num-t.num}).map(function(t,o){var n=(t.num/i*100).toFixed(2),a=t.num/i*360;t.bili=n,t.jiaodu=a});var u=Math.PI/180,c=-90,h=t/2-50;n.map(function(t,o){var n,a,i=c+t.jiaodu,e=(c+t.jiaodu/2)*u,l=Math.cos(e)*h,r=Math.sin(e)*h;d.beginPath(),d.moveTo(0,0),d.arc(0,0,h,c*u,i*u),d.fillStyle=t.color,d.fill(),c=i,d.closePath(),d.strokeStyle=t.color,o<5&&function(t,o){d.beginPath(),d.moveTo(t,o),0<t&&o<0?(d.lineTo(t+10,o-10),d.lineTo(t+70,o-10)):0<t&&0<o?(d.lineTo(t+10,o+10),d.lineTo(t+70,o+10)):t<0&&0<o?(d.lineTo(t-10,o+10),d.lineTo(t-70,o+10)):t<0&&o<0&&(d.lineTo(t-10,o-10),d.lineTo(t-70,o-10));d.stroke()}(l,r),a="<tr align='center'><td><span style='background:"+(n=t).color+";'></span>"+n.name+"</td><td>"+n.bili+"</td><td>"+n.num+"</td><td>"+n.num+"</td></tr>",$(".table>tbody").append(a)}),d.beginPath(),d.arc(0,0,t/2-110,0,360*u),d.fillStyle="#fff",d.strokeStyle="rgba(255,255,255,.5)",d.lineWidth=20,d.stroke(),d.fill()}load(),$(window).on("resize",load),s;